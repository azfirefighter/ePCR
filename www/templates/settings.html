<ion-nav-bar>
</ion-nav-bar>
<ion-view view-title="Settings">
  <ion-nav-buttons side="primary">
    <button class="button button-icon icon ion-ios-minus-outline" ng-click="toggleDelete()" ng-show="activeButton == 3"></button>
  </ion-nav-buttons>
  <ion-nav-buttons side="secondary">
    <button class="button button-clear" ng-click="save()">
      <i class="icon ion-ios-checkmark-outline"></i> Save
    </button>
  </ion-nav-buttons>
  <ion-content class="padding">
    <div class="button-bar bar-calm">
      <a class="button" ng-class="{'active' : activeButton == 1}" ng-click="switchTab(1)">User Info</a>
      <a class="button" ng-class="{'active' : activeButton == 2}" ng-click="switchTab(2)">Profile Picture</a>
      <a class="button" ng-class="{'active' : activeButton == 3}" ng-click="switchTab(3)">Partners</a>
    </div>
    <br>
    <ion-list ng-show="activeButton == 1">
      <ion-item class="item-divider">
        User Info
      </ion-item>
      <ion-item class="item-input">
        <span class="input-label">First Name</span>
        <input type="text" ng-model="form.first_name">
      </ion-item>
      <ion-item class="item-input">
        <span class="input-label">Last Name</span>
        <input type="text" ng-model="form.last_name">
      </ion-item>
      <ion-item class="item-input">
        <span class="input-label">Identification</span>
        <input type="text" ng-model="form.identification">
      </ion-item>
      <ion-item class="item-input item-select">
        <span class="input-label">Position</span>
        <select ng-model="form.position">
          <option>Paramedic</option>
          <option>Nurse</option>
          <option>Medic</option>
          <option>EMT</option>
          <option>Firefighter</option>
        </select>
      </ion-item>
      <ion-item class="item-input">
        <span class="input-label">Work Place</span>
        <input type="text" ng-model="form.work_place">
      </ion-item>
<!--
      <ion-item class="item-input">
        <span class="input-label">Email reports to</span>
        <input type="email" ng-model="form.send_report_to">
      </ion-item>
-->
    </ion-list>
    <div ng-show="activeButton == 2">
      <div class="row">
        <img id="profilePicture" ng-src="{{form.photoUrl}}" ng-show="form.photoUrl" style="max-width: 100%" />
        <canvas id="profileCanvas" style="display:none"/>
      </div>
      <div class="row">
        <div class="col">
          <button class="button button-block button-outline button-positive" ng-click="getPhoto(true)"><i class="icon ion-camera"></i> Camera</button>
        </div>
        <div class="col">
          <button class="button button-block button-outline button-positive" ng-click="getPhoto(false)"><i class="icon ion-images"></i> Library</button>
        </div>
        <div class="col">
          <button class="button button-block button-outline button-positive" ng-click="removePhoto()"><i class="icon ion-close-round"></i> Remove</button>
        </div>
      </div>
    </div>
    <ion-list show-delete="showDelete" ng-show="activeButton == 3">
      <button class="button button-block button-positive button-outline" ng-click="openModal()">
        <i class="icon ion-android-add"></i> Add Partner
      </button>
      <ion-item class="item-divider">
        Partners
      </ion-item>
      <ion-item ng-repeat="partner in partners" type="item-text-wrap">
        <h2>{{partner}}</h2>
        <!--        <h4>HR:{{vitals.hr}} bpm, Sys/Dia:{{vitals.sys}}/{{vitals.dia}}</h4>-->
        <ion-delete-button class="ion-minus-circled" ng-click="deletePartner($index)">
        </ion-delete-button>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-view>

<script id="add_partner.html" type="text/ng-template">
  <div class="modal" style="min-height: 168px; bottom: inherit;">
    <ion-header-bar class="bar-positive">
      <h1 class="title">Add Partner</h1>
    </ion-header-bar>
    <ion-content class="padding">
      <ion-list>
        <ion-item class="item-input">
          <span class="input-label">Name</span>
          <input type="text" ng-model="addPartner.name">
        </ion-item>
      </ion-list>

      <button class="button button-full button-balanced" ng-click="closeModal()">Add</button>
    </ion-content>
  </div>
</script>